{"failedCount":0,"prefixedPath":"classpath:KaluzaTests\/features\/mediaWiki-tokenGeneration-modifyPage.feature","packageQualifiedName":"KaluzaTests.features.mediaWiki-tokenGeneration-modifyPage","loopIndex":-1,"relativePath":"KaluzaTests\/features\/mediaWiki-tokenGeneration-modifyPage.feature","scenarioResults":[{"sectionIndex":0,"stepResults":[{"result":{"nanos":631249,"millis":0.631249,"status":"passed"},"step":{"line":12,"prefix":"Given","index":0,"text":"url WikiBaseUrl"},"stepLog":"01:49:36.563 karate.env system property was: features \n01:49:36.569 karate.env = features \n01:49:36.572 config.baseUrl = null \n"},{"result":{"nanos":1063290,"millis":1.06329,"status":"passed"},"step":{"line":13,"prefix":"And","index":1,"text":"param action = 'query'"}},{"result":{"nanos":288757,"millis":0.288757,"status":"passed"},"step":{"line":14,"prefix":"And","index":2,"text":"param meta = 'tokens'"}},{"result":{"nanos":306472,"millis":0.306472,"status":"passed"},"step":{"line":15,"prefix":"And","index":3,"text":"param type = 'login'"}},{"result":{"nanos":387810,"millis":0.38781,"status":"passed"},"step":{"line":16,"prefix":"And","index":4,"text":"param format = 'json'"}},{"result":{"nanos":46429943,"millis":46.429943,"status":"passed"},"step":{"line":17,"prefix":"And","index":5,"text":"headers { content-type : 'application\/json; charset=utf-8' }"}},{"result":{"nanos":569863076,"millis":569.863076,"status":"passed"},"step":{"line":18,"prefix":"When","index":6,"text":"method get"},"stepLog":"01:49:36.796 request:\n1 > GET https:\/\/test.wikipedia.org\/w\/api.php?meta=tokens&format=json&action=query&type=login\n1 > content-type: application\/json; charset=utf-8\n1 > Host: test.wikipedia.org\n1 > Connection: Keep-Alive\n1 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/15.0.1)\n1 > Accept-Encoding: gzip,deflate\n\n\n01:49:37.219 response time in milliseconds: 410\n1 < 200\n1 < date: Sun, 25 Sep 2022 00:49:37 GMT\n1 < server: mw1362.eqiad.wmnet\n1 < x-content-type-options: nosniff\n1 < x-frame-options: DENY\n1 < content-disposition: inline; filename=api-result.json\n1 < cache-control: private, max-age=0, s-maxage=0\n1 < vary: Accept-Encoding\n1 < content-length: 100\n1 < content-type: application\/json; charset=utf-8\n1 < age: 0\n1 < x-cache: cp3054 miss, cp3054 pass\n1 < x-cache-status: pass\n1 < server-timing: cache;desc=\"pass\", host;desc=\"cp3054\"\n1 < strict-transport-security: max-age=106384710; includeSubDomains; preload\n1 < report-to: { \"group\": \"wm_nel\", \"max_age\": 86400, \"endpoints\": [{ \"url\": \"https:\/\/intake-logging.wikimedia.org\/v1\/events?stream=w3c.reportingapi.network_error&schema_uri=\/w3c\/reportingapi\/network_error\/1.0.0\" }] }\n1 < nel: { \"report_to\": \"wm_nel\", \"max_age\": 86400, \"failure_fraction\": 0.05, \"success_fraction\": 0.0}\n1 < accept-ch: Sec-CH-UA-Arch,Sec-CH-UA-Bitness,Sec-CH-UA-Full-Version-List,Sec-CH-UA-Model,Sec-CH-UA-Platform-Version\n1 < permissions-policy: interest-cohort=(),ch-ua-arch=(self \"intake-analytics.wikimedia.org\"),ch-ua-bitness=(self \"intake-analytics.wikimedia.org\"),ch-ua-full-version-list=(self \"intake-analytics.wikimedia.org\"),ch-ua-model=(self \"intake-analytics.wikimedia.org\"),ch-ua-platform-version=(self \"intake-analytics.wikimedia.org\")\n1 < x-client-ip: 137.220.84.111\n1 < accept-ranges: bytes\n1 < Set-Cookie: GeoIP=GB:ENG:London:51.51:-0.12:v4; Domain=wikipedia.org; Secure\n1 < Set-Cookie: WMF-Last-Access=25-Sep-2022; Max-Age=1666828800000; Expires=Sun, 08 Jun 54842 00:49:37 GMT; Domain=test.wikipedia.org; Secure\n1 < Set-Cookie: WMF-Last-Access-Global=25-Sep-2022; Max-Age=1666828800000; Expires=Sun, 08 Jun 54842 00:49:37 GMT; Domain=wikipedia.org; Secure\n1 < Set-Cookie: ss0-testwikiSession=ntrk3sd8hhcqdakbi0d653dakit4jk7l; Domain=test.wikipedia.org; Secure\n1 < Set-Cookie: testwikiSession=ntrk3sd8hhcqdakbi0d653dakit4jk7l; Domain=test.wikipedia.org; Secure\n{\"batchcomplete\":\"\",\"query\":{\"tokens\":{\"logintoken\":\"f397717a9d471b90ec597f0398304640632fa5a1+\\\\\"}}}\n\n"},{"result":{"nanos":30237,"millis":0.030237,"status":"passed"},"step":{"line":19,"prefix":"Then","index":7,"text":"status 200"}},{"result":{"nanos":8990577,"millis":8.990577,"status":"passed"},"step":{"line":20,"prefix":"And","index":8,"text":"match response contains { \"batchcomplete\": \"\" }"}},{"result":{"nanos":1614319,"millis":1.614319,"status":"passed"},"step":{"comments":["# store the token keys from the response"],"line":23,"prefix":"*","index":9,"text":"def  loginTokenKey = response.query.tokens.logintoken"}},{"result":{"nanos":382801,"millis":0.382801,"status":"passed"},"step":{"comments":["#  Action: Step 2: POST request to log in. [Log in]"],"line":26,"prefix":"Given","index":10,"text":"url WikiBaseUrl"}},{"result":{"nanos":219059,"millis":0.219059,"status":"passed"},"step":{"line":27,"prefix":"And","index":11,"text":"headers {\"host\":\"test.wikipedia.org\",\"content-type\":\"application\/x-www-form-urlencoded\"}"}},{"result":{"nanos":110442047,"millis":110.442047,"status":"passed"},"step":{"line":28,"prefix":"And","index":12,"text":"form field action = 'login'"}},{"result":{"nanos":973397,"millis":0.973397,"status":"passed"},"step":{"line":29,"prefix":"And","index":13,"text":"form field lgname = 'Sbadada@botTester'"}},{"result":{"nanos":458414,"millis":0.458414,"status":"passed"},"step":{"line":30,"prefix":"And","index":14,"text":"form field lgpassword = 'chegbj0rjjsvpge212u5064tel7huj9p'"}},{"result":{"nanos":246548,"millis":0.246548,"status":"passed"},"step":{"line":31,"prefix":"And","index":15,"text":"form field lgtoken = loginTokenKey"}},{"result":{"nanos":484635,"millis":0.484635,"status":"passed"},"step":{"line":32,"prefix":"And","index":16,"text":"form field format = 'json'"}},{"result":{"nanos":616645401,"millis":616.645401,"status":"passed"},"step":{"line":33,"prefix":"When","index":17,"text":"method post"},"stepLog":"01:49:37.362 request:\n2 > POST https:\/\/test.wikipedia.org\/w\/api.php\n2 > host: test.wikipedia.org\n2 > content-type: application\/x-www-form-urlencoded\n2 > Cookie: GeoIP=GB:ENG:London:51.51:-0.12:v4; testwikiSession=ntrk3sd8hhcqdakbi0d653dakit4jk7l; ss0-testwikiSession=ntrk3sd8hhcqdakbi0d653dakit4jk7l; WMF-Last-Access-Global=25-Sep-2022; WMF-Last-Access=25-Sep-2022\n2 > Content-Length: 150\n2 > Connection: Keep-Alive\n2 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/15.0.1)\n2 > Accept-Encoding: gzip,deflate\naction=login&lgname=Sbadada%40botTester&lgpassword=chegbj0rjjsvpge212u5064tel7huj9p&lgtoken=f397717a9d471b90ec597f0398304640632fa5a1%2B%5C&format=json\n\n01:49:37.966 response time in milliseconds: 604\n2 < 200\n2 < date: Sun, 25 Sep 2022 00:49:37 GMT\n2 < server: mw1359.eqiad.wmnet\n2 < x-content-type-options: nosniff\n2 < x-frame-options: DENY\n2 < content-disposition: inline; filename=api-result.json\n2 < cache-control: private, max-age=0, s-maxage=0\n2 < vary: Accept-Encoding\n2 < content-length: 70\n2 < content-type: application\/json; charset=utf-8\n2 < age: 0\n2 < x-cache: cp3064 miss, cp3054 pass\n2 < x-cache-status: pass\n2 < server-timing: cache;desc=\"pass\", host;desc=\"cp3054\"\n2 < strict-transport-security: max-age=106384710; includeSubDomains; preload\n2 < report-to: { \"group\": \"wm_nel\", \"max_age\": 86400, \"endpoints\": [{ \"url\": \"https:\/\/intake-logging.wikimedia.org\/v1\/events?stream=w3c.reportingapi.network_error&schema_uri=\/w3c\/reportingapi\/network_error\/1.0.0\" }] }\n2 < nel: { \"report_to\": \"wm_nel\", \"max_age\": 86400, \"failure_fraction\": 0.05, \"success_fraction\": 0.0}\n2 < accept-ch: Sec-CH-UA-Arch,Sec-CH-UA-Bitness,Sec-CH-UA-Full-Version-List,Sec-CH-UA-Model,Sec-CH-UA-Platform-Version\n2 < permissions-policy: interest-cohort=(),ch-ua-arch=(self \"intake-analytics.wikimedia.org\"),ch-ua-bitness=(self \"intake-analytics.wikimedia.org\"),ch-ua-full-version-list=(self \"intake-analytics.wikimedia.org\"),ch-ua-model=(self \"intake-analytics.wikimedia.org\"),ch-ua-platform-version=(self \"intake-analytics.wikimedia.org\")\n2 < x-client-ip: 137.220.84.111\n2 < accept-ranges: bytes\n2 < Set-Cookie: UseCDNCache=false; Max-Age=1664066987000; Expires=Wed, 01 Dec 54754 14:32:57 GMT; Domain=test.wikipedia.org; Secure\n2 < Set-Cookie: UseDC=master; Max-Age=1664066987000; Expires=Wed, 01 Dec 54754 14:32:57 GMT; Domain=test.wikipedia.org; Secure\n2 < Set-Cookie: cpPosIndex=1%401664066977%23f96970a8b4e01316627cfb194423fa73; Max-Age=1664066987000; Expires=Wed, 01 Dec 54754 14:32:57 GMT; Domain=test.wikipedia.org; Secure\n2 < Set-Cookie: loginnotify_prevlogins=2022-17llxyw-1wsxup5trmwq2qppkgfu4mgyipkp38u; Max-Age=1679618977000; Expires=Fri, 27 Sep 55247 11:46:17 GMT; Domain=test.wikipedia.org; Secure\n2 < Set-Cookie: testwiki_BPsession=to03ndoq8hukhieghabrlqes9uo9772l; Domain=test.wikipedia.org; Secure\n{\"login\":{\"result\":\"Success\",\"lguserid\":55189,\"lgusername\":\"Sbadada\"}}\n\n"},{"result":{"nanos":8622,"millis":0.008622,"status":"passed"},"step":{"line":34,"prefix":"Then","index":18,"text":"status 200"}},{"result":{"nanos":469033,"millis":0.469033,"status":"passed"},"step":{"line":35,"prefix":"And","index":19,"text":"match response contains {\"login\":{\"result\":\"Success\",\"lguserid\":55189,\"lgusername\":\"Sbadada\"}}"}},{"result":{"nanos":93824,"millis":0.093824,"status":"passed"},"step":{"comments":["# Action: Step 3: GET a CSRF token"],"line":39,"prefix":"Given","index":20,"text":"url WikiBaseUrl"}},{"result":{"nanos":94388,"millis":0.094388,"status":"passed"},"step":{"line":40,"prefix":"And","index":21,"text":"headers { Content-Type: 'application\/json; charset=utf-8', Accept: 'application\/json'}"}},{"result":{"nanos":466743,"millis":0.466743,"status":"passed"},"step":{"line":41,"prefix":"And","index":22,"text":"param action = 'query'"}},{"result":{"nanos":584080,"millis":0.58408,"status":"passed"},"step":{"line":42,"prefix":"And","index":23,"text":"param meta = 'tokens'"}},{"result":{"nanos":394073,"millis":0.394073,"status":"passed"},"step":{"line":43,"prefix":"And","index":24,"text":"param format = 'json'"}},{"result":{"nanos":189068394,"millis":189.068394,"status":"passed"},"step":{"line":44,"prefix":"When","index":25,"text":"method get"},"stepLog":"01:49:37.971 request:\n3 > GET https:\/\/test.wikipedia.org\/w\/api.php?meta=tokens&format=json&action=query\n3 > Content-Type: application\/json; charset=utf-8\n3 > Accept: application\/json\n3 > Cookie: GeoIP=GB:ENG:London:51.51:-0.12:v4; testwikiSession=ntrk3sd8hhcqdakbi0d653dakit4jk7l; ss0-testwikiSession=ntrk3sd8hhcqdakbi0d653dakit4jk7l; testwiki_BPsession=to03ndoq8hukhieghabrlqes9uo9772l; WMF-Last-Access-Global=25-Sep-2022; UseDC=master; cpPosIndex=1%401664066977%23f96970a8b4e01316627cfb194423fa73; loginnotify_prevlogins=2022-17llxyw-1wsxup5trmwq2qppkgfu4mgyipkp38u; WMF-Last-Access=25-Sep-2022; UseCDNCache=false\n3 > Host: test.wikipedia.org\n3 > Connection: Keep-Alive\n3 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/15.0.1)\n3 > Accept-Encoding: gzip,deflate\n\n\n01:49:38.158 response time in milliseconds: 187\n3 < 200\n3 < date: Sun, 25 Sep 2022 00:49:38 GMT\n3 < server: mw1380.eqiad.wmnet\n3 < x-content-type-options: nosniff\n3 < x-frame-options: DENY\n3 < content-disposition: inline; filename=api-result.json\n3 < cache-control: private, must-revalidate, max-age=0\n3 < vary: Accept-Encoding\n3 < content-length: 99\n3 < content-type: application\/json; charset=utf-8\n3 < age: 0\n3 < x-cache: cp3064 miss, cp3054 pass\n3 < x-cache-status: pass\n3 < server-timing: cache;desc=\"pass\", host;desc=\"cp3054\"\n3 < strict-transport-security: max-age=106384710; includeSubDomains; preload\n3 < report-to: { \"group\": \"wm_nel\", \"max_age\": 86400, \"endpoints\": [{ \"url\": \"https:\/\/intake-logging.wikimedia.org\/v1\/events?stream=w3c.reportingapi.network_error&schema_uri=\/w3c\/reportingapi\/network_error\/1.0.0\" }] }\n3 < nel: { \"report_to\": \"wm_nel\", \"max_age\": 86400, \"failure_fraction\": 0.05, \"success_fraction\": 0.0}\n3 < accept-ch: Sec-CH-UA-Arch,Sec-CH-UA-Bitness,Sec-CH-UA-Full-Version-List,Sec-CH-UA-Model,Sec-CH-UA-Platform-Version\n3 < permissions-policy: interest-cohort=(),ch-ua-arch=(self \"intake-analytics.wikimedia.org\"),ch-ua-bitness=(self \"intake-analytics.wikimedia.org\"),ch-ua-full-version-list=(self \"intake-analytics.wikimedia.org\"),ch-ua-model=(self \"intake-analytics.wikimedia.org\"),ch-ua-platform-version=(self \"intake-analytics.wikimedia.org\")\n3 < x-client-ip: 137.220.84.111\n3 < accept-ranges: bytes\n{\"batchcomplete\":\"\",\"query\":{\"tokens\":{\"csrftoken\":\"1e33ff3a48790b98770f91d87370d61e632fa5a2+\\\\\"}}}\n\n"},{"result":{"nanos":23233,"millis":0.023233,"status":"passed"},"step":{"line":45,"prefix":"Then","index":26,"text":"status 200"}},{"result":{"nanos":321129,"millis":0.321129,"status":"passed"},"step":{"line":46,"prefix":"And","index":27,"text":"match response contains { \"batchcomplete\": \"\" }"}},{"result":{"nanos":2481368,"millis":2.481368,"status":"passed"},"step":{"comments":["# store the token keys from the response"],"line":49,"prefix":"*","index":28,"text":"print response"},"stepLog":"01:49:38.160 [print] {\n  \"batchcomplete\": \"\",\n  \"query\": {\n    \"tokens\": {\n      \"csrftoken\": \"1e33ff3a48790b98770f91d87370d61e632fa5a2+\\\\\"\n    }\n  }\n}\n \n"},{"result":{"nanos":706460,"millis":0.70646,"status":"passed"},"step":{"line":50,"prefix":"*","index":29,"text":"def  csrftoken = response.query.tokens.csrftoken"}},{"result":{"nanos":68254,"millis":0.068254,"status":"passed"},"step":{"comments":["# Action: Step 4: Send a POST request, with the CSRF token, to take action on a page"],"line":53,"prefix":"Given","index":30,"text":"url WikiBaseUrl"}},{"result":{"nanos":76876,"millis":0.076876,"status":"passed"},"step":{"line":54,"prefix":"And","index":31,"text":"headers {\"host\":\"test.wikipedia.org\",\"content-type\":\"application\/x-www-form-urlencoded\"}"}},{"result":{"nanos":344021,"millis":0.344021,"status":"passed"},"step":{"line":55,"prefix":"And","index":32,"text":"form field action = 'edit'"}},{"result":{"nanos":335078,"millis":0.335078,"status":"passed"},"step":{"line":56,"prefix":"And","index":33,"text":"form field title = 'Project:Sandbox'"}},{"result":{"nanos":251470,"millis":0.25147,"status":"passed"},"step":{"line":57,"prefix":"And","index":34,"text":"form field text = 'test edit1112'"}},{"result":{"nanos":106822,"millis":0.106822,"status":"passed"},"step":{"line":58,"prefix":"And","index":35,"text":"form field token = csrftoken"}},{"result":{"nanos":153917,"millis":0.153917,"status":"passed"},"step":{"line":59,"prefix":"And","index":36,"text":"form field format = 'json'"}},{"result":{"nanos":1868932478,"millis":1868.932478,"status":"passed"},"step":{"line":60,"prefix":"When","index":37,"text":"method post"},"stepLog":"01:49:38.165 request:\n4 > POST https:\/\/test.wikipedia.org\/w\/api.php\n4 > host: test.wikipedia.org\n4 > content-type: application\/x-www-form-urlencoded\n4 > Cookie: GeoIP=GB:ENG:London:51.51:-0.12:v4; testwikiSession=ntrk3sd8hhcqdakbi0d653dakit4jk7l; ss0-testwikiSession=ntrk3sd8hhcqdakbi0d653dakit4jk7l; testwiki_BPsession=to03ndoq8hukhieghabrlqes9uo9772l; WMF-Last-Access-Global=25-Sep-2022; UseDC=master; cpPosIndex=1%401664066977%23f96970a8b4e01316627cfb194423fa73; loginnotify_prevlogins=2022-17llxyw-1wsxup5trmwq2qppkgfu4mgyipkp38u; WMF-Last-Access=25-Sep-2022; UseCDNCache=false\n4 > Content-Length: 119\n4 > Connection: Keep-Alive\n4 > User-Agent: Apache-HttpClient\/4.5.13 (Java\/15.0.1)\n4 > Accept-Encoding: gzip,deflate\naction=edit&title=Project%3ASandbox&text=test+edit1112&token=1e33ff3a48790b98770f91d87370d61e632fa5a2%2B%5C&format=json\n\n01:49:40.032 response time in milliseconds: 1867\n4 < 200\n4 < date: Sun, 25 Sep 2022 00:49:38 GMT\n4 < server: mw1408.eqiad.wmnet\n4 < x-content-type-options: nosniff\n4 < x-frame-options: DENY\n4 < content-disposition: inline; filename=api-result.json\n4 < cache-control: private, max-age=0, s-maxage=0\n4 < vary: Accept-Encoding\n4 < content-length: 113\n4 < content-type: application\/json; charset=utf-8\n4 < age: 4\n4 < x-cache: cp3062 miss, cp3054 pass\n4 < x-cache-status: pass\n4 < server-timing: cache;desc=\"pass\", host;desc=\"cp3054\"\n4 < strict-transport-security: max-age=106384710; includeSubDomains; preload\n4 < report-to: { \"group\": \"wm_nel\", \"max_age\": 86400, \"endpoints\": [{ \"url\": \"https:\/\/intake-logging.wikimedia.org\/v1\/events?stream=w3c.reportingapi.network_error&schema_uri=\/w3c\/reportingapi\/network_error\/1.0.0\" }] }\n4 < nel: { \"report_to\": \"wm_nel\", \"max_age\": 86400, \"failure_fraction\": 0.05, \"success_fraction\": 0.0}\n4 < accept-ch: Sec-CH-UA-Arch,Sec-CH-UA-Bitness,Sec-CH-UA-Full-Version-List,Sec-CH-UA-Model,Sec-CH-UA-Platform-Version\n4 < permissions-policy: interest-cohort=(),ch-ua-arch=(self \"intake-analytics.wikimedia.org\"),ch-ua-bitness=(self \"intake-analytics.wikimedia.org\"),ch-ua-full-version-list=(self \"intake-analytics.wikimedia.org\"),ch-ua-model=(self \"intake-analytics.wikimedia.org\"),ch-ua-platform-version=(self \"intake-analytics.wikimedia.org\")\n4 < x-client-ip: 137.220.84.111\n4 < accept-ranges: bytes\n4 < Set-Cookie: UseCDNCache=false; Max-Age=1664066990000; Expires=Wed, 01 Dec 54754 15:23:00 GMT; Domain=test.wikipedia.org; Secure\n4 < Set-Cookie: UseDC=master; Max-Age=1664066990000; Expires=Wed, 01 Dec 54754 15:23:00 GMT; Domain=test.wikipedia.org; Secure\n4 < Set-Cookie: cpPosIndex=2%401664066980%23f96970a8b4e01316627cfb194423fa73; Max-Age=1664066990000; Expires=Wed, 01 Dec 54754 15:23:00 GMT; Domain=test.wikipedia.org; Secure\n{\"edit\":{\"result\":\"Success\",\"pageid\":107092,\"title\":\"Wikipedia:Sandbox\",\"contentmodel\":\"wikitext\",\"nochange\":\"\"}}\n\n"},{"result":{"nanos":7109,"millis":0.007109,"status":"passed"},"step":{"line":61,"prefix":"Then","index":38,"text":"status 200"}},{"result":{"nanos":870695,"millis":0.870695,"status":"passed"},"step":{"line":62,"prefix":"And","index":39,"text":"match response.edit.result == \"Success\""}},{"result":{"nanos":886130,"millis":0.88613,"status":"passed"},"step":{"line":63,"prefix":"*","index":40,"text":"print response"},"stepLog":"01:49:40.035 [print] {\n  \"edit\": {\n    \"result\": \"Success\",\n    \"pageid\": 107092,\n    \"title\": \"Wikipedia:Sandbox\",\n    \"contentmodel\": \"wikitext\",\n    \"nochange\": \"\"\n  }\n}\n \n"}],"line":11,"description":"","durationMillis":3426.202229,"failed":false,"tags":["MediaWiki"],"executorName":"pool-1-thread-1","name":"Token generation","startTime":1664066976384,"refId":"[1:11]","endTime":1664066980035,"exampleIndex":-1}],"callDepth":0,"name":"Workflow\/request chaining tests for MediaWiki Token generation with modification of the wiki page","description":"","resultDate":"2022-09-25 01:49:40 am","durationMillis":3426.202229,"passedCount":1}